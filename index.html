<!DOCTYPE html>
<html lang="it" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>17/19 Urban Bistrot • Techno • Electro • House</title>
  <meta name="description" content="17/19 Urban Bistrot Roma. DJ...rdo Battaglia. Colazioni, pranzi, cene e cocktail signature." />
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0b0b0b" media="(prefers-color-scheme: dark)">
  <!-- favicon di fallback -->
  <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org... font-size='28' fill='%23fff'%3E17%2F19%3C/text%3E%3C/svg%3E" />
  <!-- favicon dal logo -->
  <link rel="icon" type="image/svg+xml" href="https://cdn.shopif...s/files/1/0887/8332/3459/files/1719logobianco.svg?v=1755104086">

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --bg:#ffffff; --fg:#0b0b0b; --muted:#6b7280; --line:#e5e7eb;
      --accent:#ff1f3d; --accent-fg:#ffffff;
      --chip:#f4f4f5; --chip-fg:#0b0b0b;
      --radius:16px; --pad:clamp(16px,4vw,32px); --max:1120px;
      --header-h:64px;
    }
    @media (prefers-color-scheme: dark){
      html[data-theme="auto"]{
        --bg:#0b0b0b; --fg:#ffffff; --muted:#9ca3af; --line:#1f1f1f;
        --accent#c23331; --accent-fg:#000000;
        --chip:#121212; --chip-fg:#e5e7eb;
      }
    }
    html[data-theme="light"]{
      --bg:#ffffff; 
      /* (… resto CSS originale invariato …) */
    }
    /* (… tutto il CSS originale del file rimane qui intatto …) */
  </style>
</head>
<body>
  <!-- (… tutto l'HTML originale del file rimane qui intatto …) -->

  <!-- === PATCH aggiunta: in fondo prima di </body> === -->
<script>
// === 17/19 PATCH: do-not-touch global CSS, all DOM-only ===

// --- CONFIG ---
const USE_HERO_CAROUSEL = true; // replace initial poster with a simple carousel
const HERO_IMAGES = [
  "https://img3.restaurantguru.com/c493-Pub-and-bar-17-19-interior.jpg",
  "https://iorampo.com/wp-content/uploads/2024/12/17-19-800x600.jpg",
  "https://media-cdn.tripadvisor.com/media/photo-s/21/e8/71/95/19-il-nostro-stile-accogliente.jpg"
];
const IG_USER_ID = "";           // optional: Instagram Graph user id
const IG_ACCESS_TOKEN = "";      // optional: long-lived token
const MENU_PHOTOS = {
  "Colazione all’Italiana": "assets/menu/colazioni_1.jpg",
  "French Breakfast": "assets/menu/colazioni_1.jpg",
  "Danish Breakfast": "assets/menu/colazioni_1.jpg",
  "American Breakfast Salata": "assets/menu/colazioni_2.jpg",
  "American Breakfast Dolce": "assets/menu/colazioni_2.jpg",
  "American Breakfast Piccante": "assets/menu/colazioni_2.jpg",
  "Pancake con sciroppo d’acero o d’agave": "assets/menu/bakery.jpg",
  "Pancake con crema/cioccolato o pistacchio e panna": "assets/menu/bakery.jpg",
  "Pancake con confettura e frutta fresca": "assets/menu/bakery.jpg",
  "Pasticceria da tè": "assets/menu/bakery.jpg",
  "Crostata di marmellata (al pz.)": "assets/menu/bakery.jpg",
  "Croissant mignon semplice o farcito": "assets/menu/bakery.jpg",
  "Mini muffin classico o farcito": "assets/menu/bakery.jpg",
  "Mini bombetta o mini ciambellina": "assets/menu/bakery.jpg",
  "Cioccolata calda": "assets/menu/cioccolata.jpg",
  "Espresso": "assets/menu/caffetteria.jpg",
  "Espresso decaffeinato": "assets/menu/caffetteria.jpg",
  "Espresso americano": "assets/menu/caffetteria.jpg",
  "Latte macchiato": "assets/menu/caffetteria.jpg",
  "Caffè latte": "assets/menu/caffetteria.jpg",
  "Caffè o Cappuccino “Special”": "assets/menu/caffetteria.jpg",
  "Cappuccino": "assets/menu/caffetteria.jpg",
  "Cappuccino vegetale di soya": "assets/menu/caffetteria.jpg",
  "Cappuccino senza lattosio": "assets/menu/caffetteria.jpg",
  "Orzo (tazza / grande)": "assets/menu/caffetteria.jpg",
  "Ginseng (tazza / grande)": "assets/menu/caffetteria.jpg",
  "Spremuta di agrumi": "assets/menu/caffetteria.jpg",
  "Centrifugato": "assets/menu/caffetteria.jpg",
  "Macedonia o tagliata di frutta fresca": "assets/menu/caffetteria.jpg",
  "Granita": "assets/menu/caffetteria.jpg",
  "Milkshake": "assets/menu/caffetteria.jpg",
  "Tè, Rooibos o infuso d’erbe": "assets/menu/caffetteria.jpg"
};

// --- 0) Header tweaks: remove Interazioni, add red Menu button (desktop+mobile) ---
(function(){
  document.getElementById('tipsBtn')?.closest('li')?.remove();
  document.getElementById('tipsBtnM')?.remove();

  const navDesk = document.querySelector('.nav-desktop');
  if(navDesk && !navDesk.querySelector('a[href="#menu"].pill--accent')){
    const li = document.createElement('li');
    li.innerHTML = '<a class="pill pill--accent" href="#menu">Menù</a>';
    navDesk.appendChild(li);
  }
  const mob = document.querySelector('.only-mobile');
  if(mob && !mob.querySelector('a[href="#menu"].pill--accent')){
    const a = document.createElement('a');
    a.href = '#menu'; a.className = 'pill pill--accent'; a.textContent = 'Menù';
    a.style.minWidth='96px'; a.style.textAlign='center';
    mob.insertBefore(a, mob.firstChild);
  }
})();

// --- 1) Smooth anchor with header offset ---
(function(){
  const H = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-h')) || 64;
  document.addEventListener('click', (e)=>{
    const a = e.target.closest('a[href^="#"]'); if(!a) return;
    const id = a.getAttribute('href'); if(!id || id==='#') return;
    const el = document.querySelector(id); if(!el) return;
    e.preventDefault();
    const top = el.getBoundingClientRect().top + scrollY - H - 8;
    scrollTo({top, behavior:'smooth'});
    history.pushState({}, '', id);
    document.getElementById('sheetClose')?.click?.();
  }, true);
})();

// --- 2) Poster -> Carousel (non-intrusive) ---
(function(){
  if(!USE_HERO_CAROUSEL) return;
  const poster = document.querySelector('.poster-frame');
  if(!poster) return;
  const slider = document.createElement('div');
  slider.className='hero-media';
  slider.style.position='relative';
  const dots = document.createElement('div');
  dots.style.cssText='position:absolute;left:0;right:0;bottom:8px;display:flex;gap:6px;justify-content:center;z-index:2';
  slider.appendChild(dots);
  const slides=[]; const bullets=[];
  HERO_IMAGES.forEach((src,i)=>{
    const s = document.createElement('div');
    s.style.cssText='position:absolute;inset:0;opacity:0;transition:opacity .4s ease';
    if(i===0) s.style.opacity='1';
    const im=new Image(); im.src=src; im.alt='Slide '+(i+1);
    Object.assign(im.style,{width:'100%',height:'100%',objectFit:'cover'});
    s.appendChild(im); slider.appendChild(s); slides.push(s);
    const b=document.createElement('button');
    b.style.cssText='width:8px;height:8px;border-radius:50%;border:0;background:#fff;opacity:'+ (i?'.6':'1');
    b.addEventListener('click',()=>go(i)); dots.appendChild(b); bullets.push(b);
  });
  let i=0; function go(n){ slides[i].style.opacity='0'; bullets[i].style.opacity='.6'; i=n; slides[i].style.opacity='1'; bullets[i].style.opacity='1'; }
  setInterval(()=>go((i+1)%slides.length), 4500);
  poster.replaceWith(slider);
})();

// --- 3) Menu: update data (Colazioni full), collapsible closed+animated, camera button per-item, 2 cols desktop ---
(function(){
  if(typeof menuData==='undefined') return;

  // mutate existing const array
  menuData.length = 0;
  menuData.push(
    { badge:'', title:'Colazioni', groups:[
      { title:'Special (fino alle 11:30)', items:[
        { name:'Colazione all’Italiana', desc:'Tris di mieli italiani, frutta fresca • Latticino con pan dolce/integrale e frutta secca • Latte aromatizzato e caffè', price:'€10,00' },
        { name:'French Breakfast', desc:'Tè/infuso • Pan piastrato o brioche con burro • Selezione di marmellate/composte/confetture', price:'€7,00' },
        { name:'Danish Breakfast', desc:'Spremuta • Toast o pancake con sciroppo d’acero • Caffè', price:'€7,00' },
        { name:'American Breakfast Salata', desc:'Bacon e uova strapazzate • Pan piastrato, burro e confetture/composte • Caffè americano', price:'€12,00' },
        { name:'American Breakfast Dolce', desc:'Cioccolata calda con panna • Mini muffin assortiti o pasticceria da tè • Caffè americano', price:'€10,00' },
        { name:'American Breakfast Piccante', desc:'Uova strapazzate alla paprika • Pan piastrato e salame piccante • Caffè americano', price:'€12,00' },
      ]},
      { title:'Bakery', items:[
        { name:'Pancake con sciroppo d’acero o d’agave', price:'€4,50' },
        { name:'Pancake con crema/cioccolato o pistacchio e panna', price:'€5,00' },
        { name:'Pancake con confettura e frutta fresca', price:'€5,00' },
        { name:'Pasticceria da tè', price:'€5,00' },
        { name:'Crostata di marmellata (al pz.)', price:'€3,50' },
        { name:'Croissant mignon semplice o farcito', price:'€1,50' },
        { name:'Mini muffin classico o farcito', price:'€1,50' },
        { name:'Mini bombetta o mini ciambellina', price:'€1,50' },
      ]},
      { title:'Cioccolata Calda', items:[
        { name:'Cioccolata calda', desc:'Classica Oro • Caramello salato • Gianduia • Rose & Lamponi • Arancia & Cannella • Fondente o Bianca al Pistacchio • Menta', price:'€4,50' },
      ]},
      { title:'Caffetteria & Freschi', items:[
        { name:'Espresso', price:'€1,50' },{ name:'Espresso decaffeinato', price:'€2,00' },{ name:'Espresso americano', price:'€2,50' },
        { name:'Latte macchiato', price:'€2,50' },{ name:'Caffè latte', price:'€3,00' },
        { name:'Caffè o Cappuccino “Special”', price:'€4,00' },{ name:'Cappuccino', price:'€2,00' },
        { name:'Cappuccino vegetale di soya', price:'€3,00' },{ name:'Cappuccino senza lattosio', price:'€3,00' },
        { name:'Orzo (tazza / grande)', price:'€2,00 / €2,50' },{ name:'Ginseng (tazza / grande)', price:'€2,00 / €2,50' },
        { name:'Spremuta di agrumi', price:'€4,00' },{ name:'Centrifugato', price:'€5,00' },
        { name:'Macedonia o tagliata di frutta fresca', price:'€6,00' },{ name:'Granita', price:'€6,00' },
        { name:'Milkshake', price:'€4,00' },{ name:'Tè, Rooibos o infuso d’erbe', price:'€4,00' },
      ]},
    ]},
    { badge:'LUNCH', title:'Pranzo', items:[
      { name:'In allestimento', desc:'Torna a trovarci presto', price:'' },
      // { name:'Club Sandwich', desc:'tacchino, bacon', price:'€13' },
      // { name:'Pasta del Giorno', desc:'chiedi allo staff', price:'€14' },
    ]},
    { badge:'DINNER', title:'Cena', items:[
      { name:'In allestimento', desc:'Torna a trovarci presto', price:'' },
      // { name:'Cacio e Pepe', desc:'pasta fresca, pecorino romano', price:'€12' },
    ]},
    { badge:'DRINKS', title:'Drinks', items:[
      { name:'In allestimento', desc:'Torna a trovarci presto', price:'' },
      // { name:'Signature “17/19”', desc:'gin, lime, bitter, miele', price:'€10' },
      // { name:'Negroni Sbagliato', price:'€8' },
    ]},
  );

  // Override renderer to add camera buttons + animations + columns
  window.renderMenu = function(){
    const wrap = document.getElementById('menuAccordions'); if(!wrap) return;
    wrap.innerHTML = '';
    menuData.forEach(cat=>{
      const det = document.createElement('details');
      det.className='menu-acc reveal';
      // start closed
      const sum = document.createElement('summary');
      sum.className='menu-sum';
      const badge = (cat.badge && cat.badge.trim()) ? `<span class="badge">${cat.badge}</span>` : '';
      sum.innerHTML = `${badge}<h3>${cat.title}</h3><svg class="chev" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>`;
      det.appendChild(sum);
      const body = document.createElement('div'); body.className='menu-body'; det.appendChild(body);

      function addItem(it, container){
        const row = document.createElement('div'); row.className='menu-item';
        const left = document.createElement('div');
        left.innerHTML = `${it.name}${it.desc?` <span class="meta">${it.desc}</span>`:''}`;
        const right = document.createElement('div'); right.className='price'; right.textContent = it.price||'';

        // camera button if photo exists
        const ph = MENU_PHOTOS[it.name] || null;
        if(ph){
          const cam = document.createElement('button');
          cam.type='button'; cam.setAttribute('aria-label','Foto'); cam.title='Foto';
          cam.innerHTML='📷';
          cam.style.cssText='margin-left:8px;border:1px solid var(--line);background:var(--chip);color:var(--chip-fg);padding:2px 6px;border-radius:10px;cursor:pointer;font-size:14px;line-height:1';
          cam.addEventListener('click', ()=> openPhoto(ph, it.name));
          left.appendChild(cam);
        }
        row.appendChild(left); row.appendChild(right); container.appendChild(row);
      }

      if(cat.items){
        const cont = document.createElement('div'); cont.className='items';
        body.appendChild(cont);
        (cat.items||[]).forEach(it=>addItem(it, cont));
      }
      if(cat.groups){
        (cat.groups||[]).forEach(g=>{
          const gt = document.createElement('div'); gt.className='group-title'; gt.textContent=g.title; body.appendChild(gt);
          const cont = document.createElement('div'); cont.className='items'; body.appendChild(cont);
          (g.items||[]).forEach(it=>addItem(it, cont));
        });
      }

      wrap.appendChild(det);

      // animated expand/collapse
      sum.addEventListener('click', (e)=>{
        e.preventDefault();
        const open = det.hasAttribute('open');
        const content = body;
        const start = content.offsetHeight;
        if(!open){
          det.setAttribute('open','');
          content.style.height = 'auto';
          const end = content.offsetHeight;
          content.style.height = start+'px'; content.offsetHeight;
          content.style.transition = 'height .28s ease';
          content.style.height = end+'px';
          content.addEventListener('transitionend', function onEnd(){ content.style.height='auto'; content.style.transition = ''; content.removeEventListener('transitionend', onEnd); });
        }else{
          const end = 0;
          content.style.height = start+'px'; content.offsetHeight;
          content.style.transition = 'height .24s ease';
          content.style.height = end+'px';
          content.addEventListener('transitionend', function onEnd(){ det.removeAttribute('open'); content.style.transition=''; content.removeEventListener('transitionend', onEnd); });
        }
      });
    });

    // columns: 1col mobile, 2cols desktop (>=1000px)
    function applyCols(){
      const two = matchMedia('(min-width: 1000px)').matches;
      document.querySelectorAll('#menuAccordions .items').forEach(c=>{
        c.style.display='grid'; c.style.gap='10px';
        c.style.gridTemplateColumns = two ? '1fr 1fr' : '1fr';
      });
    }
    applyCols(); addEventListener('resize', applyCols);
  };

  // photo modal
  let photoOverlay=null;
  function openPhoto(src, alt){
    if(!photoOverlay){
      photoOverlay = document.createElement('div');
      photoOverlay.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,.6);display:grid;place-items:center;z-index:1200;padding:16px';
      const panel = document.createElement('div');
      panel.style.cssText='position:relative;max-width:min(92vw,720px);width:100%;background:var(--bg);border:1px solid var(--line);border-radius:16px;overflow:hidden';
      const btn = document.createElement('button');
      btn.textContent='×'; btn.setAttribute('aria-label','Chiudi');
      btn.style.cssText='position:absolute;top:8px;right:10px;border:1px solid var(--line);background:var(--chip);color:var(--chip-fg);padding:4px 10px;border-radius:10px;cursor:pointer;font-weight:900';
      const img = new Image(); Object.assign(img.style,{width:'100%',height:'auto',display:'block'});
      btn.addEventListener('click', ()=> photoOverlay.remove());
      photoOverlay.addEventListener('click', e=>{ if(e.target===photoOverlay) photoOverlay.remove(); });
      panel.appendChild(img); panel.appendChild(btn); photoOverlay.appendChild(panel); document.body.appendChild(photoOverlay);
      photoOverlay._img = img;
    }else{ document.body.appendChild(photoOverlay); }
    photoOverlay._img.src = src; photoOverlay._img.alt = alt || '';
  }
  window.openPhoto = openPhoto;

  // render now (override any previous)
  try { window.renderMenu(); } catch(e){ console.error(e); }
})();

</script>

</body>
</html>
